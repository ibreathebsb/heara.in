{"data":{"site":{"siteMetadata":{"title":"Heara.in","author":"Isaac Young"}},"markdownRemark":{"id":"75850ed1-ed81-51b3-8533-c26e066fe0d6","html":"<blockquote>\n<p>最近接到一个比较棘手的布局需求，只能用flex实现，并且无法使用js计算，经过和同事们的讨论最终实现了，各位看官往下看</p>\n</blockquote>\n<h2 id=\"布局要求\"><a href=\"#%E5%B8%83%E5%B1%80%E8%A6%81%E6%B1%82\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>布局要求</h2>\n<ol>\n<li><code class=\"language-text\">A</code> <code class=\"language-text\">B</code> <code class=\"language-text\">C</code>单行布局，<code class=\"language-text\">A</code>的宽度固定，<code class=\"language-text\">B</code>、<code class=\"language-text\">C</code>宽度可变</li>\n</ol>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/10600a872a0afbd5f6c629514f8683c5/303b3/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 26.158940397350992%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVQY022OUSuDcRSH/3IhN274ApLIaqFcyY3vxfgAmLYxy7utRDHpbTUXy8XaXtnCtmhRMzMxI41thVCP874bSS6e+j2/c04d1ajX2TOSRIwjdoWokSKaSP34f0R+7TW7Y6LxA56qVdRz+YoJl4FaeRNeGHCfYnNnUT7Ta0L9D9L5Xun35LC70lY2GV5McnuZRzUqJSa1E9o2oWsbhgLXjASLqA1oXwe1Bt0h6Ak1s9UJtuANo/4LOqXv2IKx1TPuSwVUTT4cXzpE+WUxAH3ePIPe86Zr78Kn5BZm1j6sWa+3gG05Z92Y2N0ZykX5sFZ9xKPHmApncYQzzOsGC3qCafHZcNpipsW3O2Q2p+/j1OPWnunOnRgPlTu+AJdOItDbZVHUAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"1\"\n        title=\"\"\n        src=\"/static/10600a872a0afbd5f6c629514f8683c5/fb8a0/1.png\"\n        srcset=\"/static/10600a872a0afbd5f6c629514f8683c5/1a291/1.png 148w,\n/static/10600a872a0afbd5f6c629514f8683c5/2bc4a/1.png 295w,\n/static/10600a872a0afbd5f6c629514f8683c5/fb8a0/1.png 590w,\n/static/10600a872a0afbd5f6c629514f8683c5/526de/1.png 885w,\n/static/10600a872a0afbd5f6c629514f8683c5/fa2eb/1.png 1180w,\n/static/10600a872a0afbd5f6c629514f8683c5/303b3/1.png 1208w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ol start=\"2\">\n<li>当宽度不够时，不显示<code class=\"language-text\">C</code></li>\n</ol>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f2718caeb50530df93ac33e3e606119b/e57a0/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 27.768595041322314%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABUUlEQVQY012NO0tCYRyHXyuXEqILfZUgKyiIItqa/ATV0NzaVkNDQ3UUj6jZBbpROJRLmN3U9FCmRa2liNcukFDQ03uOncXh4Xfj/b/iJqkRjiY4jyWJSC6jcakJzv6zqY0+It9cxxNEk7fEJFc3GnepFGJKCSJWywiljFUpMLocom0th0Wp0KyUaJGItTq61zuLs4pt5QWH65Qu3zs2tUq7WmZxO4SYXQ8jAtCzB9YNmFBjtAZ+ENI3SfStexc6dure6DbB5q/hCGhYt6Hzf1s6vERM++RBP1i2ZLkOI664zL+GNzC3zbo3Ov2w95tJv2Z8bG4LBxeIee8Rve40fWqGQfWeGWeQIfUWuydDvyfNgEff6uhZx+55YNitMec7ZmLrmbGNJ8YDj7j2TxDVUpGPwiufhazULNVC3lAzm74x6/pWzFMr5aiVc3xJfauU+AOYZGMGMR6IUgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"2\"\n        title=\"\"\n        src=\"/static/f2718caeb50530df93ac33e3e606119b/fb8a0/2.png\"\n        srcset=\"/static/f2718caeb50530df93ac33e3e606119b/1a291/2.png 148w,\n/static/f2718caeb50530df93ac33e3e606119b/2bc4a/2.png 295w,\n/static/f2718caeb50530df93ac33e3e606119b/fb8a0/2.png 590w,\n/static/f2718caeb50530df93ac33e3e606119b/526de/2.png 885w,\n/static/f2718caeb50530df93ac33e3e606119b/fa2eb/2.png 1180w,\n/static/f2718caeb50530df93ac33e3e606119b/e57a0/2.png 1210w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<ol start=\"3\">\n<li>若B的内容宽度过长，最大伸长到容器右边</li>\n</ol>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/386be42f9d383e2a513877e36aa95b7d/7bc9a/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 27.334465195246178%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABEUlEQVQY02WMzS4DYRhGP4qKstDEohsrEhdga+EaVFnY9g7cBgtBp5NKOj9+EnEBIhaSajvTzkxnKkjoUkuHJq7gGDOaGBYned7zvHlEt9fj1mxiOB5128W0HAyrFeYYlovxK8d7j1rDwvd9RKVaJ7PjkJQHJKQBq3s3LBzcM178ICW9MSX1Q1IByUKfyUKUh35aemVM/mRp1+DRMRFGo8ms9EL6AkZOYaXUZl55RxzDqB64H4QGc+cwcxbloU98dyewKHfotC1E1TCZ2O+GA0KF5aJH+igYVIK7/Ac9+vnnA5c57PDsNhCW47AlX5PTXdY0l+3yJXmlQlZrsaHZMdZVm5wad5sBWd0jX7ri6eGOL9TnHijzwuAQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"3\"\n        title=\"\"\n        src=\"/static/386be42f9d383e2a513877e36aa95b7d/fb8a0/3.png\"\n        srcset=\"/static/386be42f9d383e2a513877e36aa95b7d/1a291/3.png 148w,\n/static/386be42f9d383e2a513877e36aa95b7d/2bc4a/3.png 295w,\n/static/386be42f9d383e2a513877e36aa95b7d/fb8a0/3.png 590w,\n/static/386be42f9d383e2a513877e36aa95b7d/526de/3.png 885w,\n/static/386be42f9d383e2a513877e36aa95b7d/7bc9a/3.png 1178w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h2 id=\"解决方案\"><a href=\"#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>解决方案</h2>\n<p>我们尝试了各种方案，但是<code class=\"language-text\">B</code>和<code class=\"language-text\">C</code>的宽度比例都不知道，我们得出结论这个方案不可行，只能请产品修改方案，<code class=\"language-text\">B</code>和<code class=\"language-text\">C</code>同时伸缩。后来<strong>qfish</strong>同学提出了一个非常牛逼的想法: 在<code class=\"language-text\">B</code>和<code class=\"language-text\">C</code>外面在加一层容器，同时设置<code class=\"language-text\">flex-wrap: wrap</code>就可以实现我们想要的效果, 原理如下:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">#D</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">flex-wrap</span><span class=\"token punctuation\">:</span> wrap<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 50px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">flex-grow</span><span class=\"token punctuation\">:</span> 1<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>由于设置了<code class=\"language-text\">flex-wrap: wrap</code>，当<code class=\"language-text\">D</code>容器放不下<code class=\"language-text\">C</code>时，<code class=\"language-text\">C</code>就会折行，跑到下一行，然而…，由于<code class=\"language-text\">overflow: hidden</code>，我们没有办法看到它，也就是说<code class=\"language-text\">C</code>是存在的，只不过我们看不到而已，而且<code class=\"language-text\">C</code>是定高的，不会影响整体布局。</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3c65e46236fe2abc91ce66f4d61b4bf3/9a45b/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 48.9795918367347%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACGklEQVQoz3WQ30tTYRjH3zCVypQSSq9KiP6WbiUvu6iLoDuJEIN+QMRKcoy1TbeV20pdNrUCCcuQ/cJtOTtjW4PS1Dyks0gjsIvKc86nd56t7Ndz+PB8eb7P+7zvc4SqqkSmUkylFeLTConUNJlwmHQkRjoaYyYS3dIzWzpmalmr6EwkTC48SXbyGS9TCURYms3dCju9nxCedQ7bC7RdDVHVu8Ye1zK7XSuSIrVOk5Iu1eqkV9XzkTbrI/znz2K9fAnfjS7EVCJJo2eZ6hDUDkOTb43jrihiCMSgJCgZgAbp1Q+bulTbMWj6rf4UXrcD+00HQy6HOXCfZ4Ua2VwtOeBbp9UZ/Tmowl7p1VUG9pcvGoGTtjHGz53BYbNxr8dprnyo+zl1nvfscq9y1J7lxLX7NPet0uJdouWWSpNbpd6xRIPjLY3ud+z3r3HQPs+x9iC20+14LnZy3WIh0GVBFItFFEUhn8+RzeV4lc8y8TRGZ3+cC/0xOu7GGXsS4006SSGToTA5QabrCqrTyofHo+RTSfLJBIV4lDnlBYJ/xOiquVqN/K8iAMGiLH79DPkMjD+EhVn+F0LXdTRNIvM3mUEntKgj7ugceaAhfAaB19+h4xQbI0HMDons1zXNzNv49ULDYFM3tuTAgoHwSvySXrg9q8nqpvzKrbpWPmL8xW8rl+ehfoHAvFx1EfrmDBY2yr58QenQ9mF/xg/P0X+O6zrDBAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"4\"\n        title=\"\"\n        src=\"/static/3c65e46236fe2abc91ce66f4d61b4bf3/fb8a0/4.png\"\n        srcset=\"/static/3c65e46236fe2abc91ce66f4d61b4bf3/1a291/4.png 148w,\n/static/3c65e46236fe2abc91ce66f4d61b4bf3/2bc4a/4.png 295w,\n/static/3c65e46236fe2abc91ce66f4d61b4bf3/fb8a0/4.png 590w,\n/static/3c65e46236fe2abc91ce66f4d61b4bf3/526de/4.png 885w,\n/static/3c65e46236fe2abc91ce66f4d61b4bf3/9a45b/4.png 1078w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>在明白背后的原理后，我不由得觉得<strong>qfish</strong>同学脑子很灵活，也庆幸自己又学会了一招，也验证了一个真理:</p>\n<blockquote>\n<p>CSS技巧是学不完的！— 鲁迅</p>\n</blockquote>\n<h2 id=\"局限性\"><a href=\"#%E5%B1%80%E9%99%90%E6%80%A7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>局限性</h2>\n<p>以上解决方案只限于整体高度固定，如果无法确定<code class=\"language-text\">A</code>、<code class=\"language-text\">B</code>、<code class=\"language-text\">C</code>最大高度，就无法通过设置D的高度来来隐藏<code class=\"language-text\">C</code>，因而无法实现想要的效果。</p>\n<blockquote>\n<p>转念一想，或许可以通过设置<code class=\"language-text\">B</code>的<code class=\"language-text\">margin-bottom:9999px</code>, <code class=\"language-text\">D</code>的<code class=\"language-text\">margin-bottom: -9999px</code>,待验证…</p>\n</blockquote>\n<h2 id=\"收获\"><a href=\"#%E6%94%B6%E8%8E%B7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>收获</h2>\n<ul>\n<li>\n<p>还是要多交流，往往你觉得真的不行了的时候，其实还是有路可以走的</p>\n</li>\n<li>\n<p>多做，多积累，不要等到书到用时方恨少，<strong>qfish</strong>同学能想到这个方案，一定有着过人的积累</p>\n</li>\n</ul>","timeToRead":2,"frontmatter":{"title":"flex-wrap的妙用","date":"May 06, 2019","spoiler":null},"fields":{"slug":"/a-little-trick-when-using-flex-wrap/"}}},"pageContext":{"slug":"/a-little-trick-when-using-flex-wrap/","previous":{"fields":{"slug":"/nodejs-localhost-https/","directoryName":"nodejs-localhost-https"},"frontmatter":{"title":"搭建Node.js本地https服务"}},"next":null}}